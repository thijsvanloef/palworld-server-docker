---
name: Security

on:  # yamllint disable-line rule:truthy
  pull_request:
    branches:
      - main

jobs:
 scan:
    runs-on: ubuntu-latest
    name: Container - Scan
    steps:
        - name: Checkout
          uses: actions/checkout@v4
  
        - name: Set up Docker Buildx
          uses: docker/setup-buildx-action@v3
  
        - name: Build and export to Docker
          uses: docker/build-push-action@v5
          with:
            load: true
            tags: thijsvanloef/palworld-server-docker:security

        - name: Scan for vulnerabilities
          uses: crazy-max/ghaction-container-scan@v3
          with:
            image: thijsvanloef/palworld-server-docker:security
            annotations: true
